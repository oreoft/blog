---
layout: post
title: java8函数式编程-上
excerpt: 安利一下最近发现的函数式库vavr
category: java
keywords: java
---

## 前言

jdk8是14年发布的正式版，因为是LTS目前也一直在维护更新，所以大部分公司锁java版本也是在锁8。但是最近长期支持版jdk17也出来了嘛，后面可能会有激进的团队跟进，我有朋友公司也把升级jdk17提上评估纲程了，慕了慕了。回到jdk8，我觉得最大的亮点就是让java一只脚踏进了多范式编程语言中。

当然你肯定会说这才哪跟哪呀，都是语法糖而已。但是配上一些优秀的库，这就是我想要要介绍的java函数式库，我上次无意在Github上看到，然后看文档学习然后引入到自己项目里，真的可以让你甜到闭口不言，写起来和scala一样。函数库的名字是vavr，[github的地址](https://github.com/vavr-io/vavr)

所以我就想介绍一下vavr，一是自己也可以总结一下，二是顺便布道一下，给也喜欢甜甜的你。本篇是上篇，为了使得更好地介绍vavr，这篇主要介绍一下java8的函数式编程，然后vavr的详细介绍会在下篇。



## 函数式编程

函数式首先要有函数，在java8以前，其实java只有方法概念，压根就没有函数这个概念。其次函数要作为“第一等公民”，所谓第一等公民就是函数和其他的基本类型/引用类型一样，处于同一地位，可以赋值，可以传参。

java其实是通过一个接口和lambda特殊语法来实现的，下面是lambda的语法

```java
// 前面是入参，然后中间使用一个 “->” 的符号连接, 后面是表达式
Type var -> 表达式;
/*
两个入参前面需要括号括起来(一个也可以括号，但是通常省略)
如果表达式很复杂，一句写不完，则需要使用{}括起来，如果有返回值还需要并且手动return
*/
(Type1 var1, Type2 var2) -> {
  表达式1;
  表达式2;
}
// 如果函数没有入参，则必须要括号，但是括号里面什么都不xei
() -> 表达式;

// 另外类型java会自动推断，其实入参的类型可以不写，只需要取个名字就好了
var -> 表达式;
(var1, var2) -> 表达式
```

*下面写一些实际例子*

```java
// 只有一个参数的语法(括号省略，类型也省略)
str -> System.out.print(str);
str -> System.out.print(str);

// 两个参数的例子(两个参数必须要括号)
(str1, str2) -> System.out.print(str + str2);

// 没有入参，复杂表达式，还带返回值
() -> {
      String someget = new String("someget");
      String result = someget.concat(".cn");
      return result;
    };
  
```

你把lambda写的函数可以赋值给一个接口，然后通过这个接口进行入参和出参传输。java内部已经很庞大了，现在一年是发两个大版本，但是再怎么改对于语法都不可能是巨变。有人说lambda是匿名内部类的语法糖，有那么点味道，但是说语法糖不准确，使用lambda编译之后，没有单独的.calss字节码文件，对应的字节码文件会在运行的时候生成。

## 函数式接口

上面介绍了java实现的函数式编程。





