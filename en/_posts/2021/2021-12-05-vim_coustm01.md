---
category: other
excerpt: It really is that simpleâ€”plain and simple.
keywords: other, macos
lang: en
layout: post
title: A Simple Vim Makeover
---

## Preface

A coworker picked up a Magic Keyboard Gen1 on Xianyu. After just a few days, the `escape` key broke, and heâ€™d already confirmed receipt... He didnâ€™t want to waste the money and still wanted to keep using it, so he listed out the scenarios where he needed `escape` and found the most frequent one was switching modes in `vim`. With that as a trigger, Iâ€™m sharing a few simple tweaks I use for vim on macOSâ€”super handy, and you can basically ditch `escape`.

Quick intro to vim: itâ€™s a text editorâ€”honestly kind of like the TextEdit app on macOSâ€”but its interaction philosophy is â€œdo everything with the keyboard.â€ Iâ€™m not here to hype vim though. As a Java dev, is there really anything better than IntelliJ IDEA? Let alone a text editor ğŸ¤¡ (runs away~). That said, I *have* seen real vim masters. At my previous company we had a PHP team, and some seniors wrote code directly on servers most of the time and barely used an IDEâ€”hands on the keyboard like playing the piano, tap tap tap~.

Why do I call it a **simple tweak**? Because I used to be obsessed with vim too. I thought writing code in vim looked insanely cool, and I did all the tinkeringâ€”highlighting, hints, search, jumps, all the flashy stuff. But when it comes to writing JVM code, I still need IntelliJ. The learning/onboarding cost goes up, and the payoff is tiny. Still, even if you donâ€™t code on servers, youâ€™ll definitely run into cases where you need to edit config files, so Iâ€™d recommend **doing a small quality-of-life setup first**. Later, if you actually need server-side coding, you can **add plugins and custom key mappings** then.



## Configuration and Plugins

Quick note: macOS ships with vim. Some folks online recommend replacing the system vim with [MacVim](https://github.com/macvim-dev/macvim). I donâ€™t recommend itâ€”partly because Iâ€™m lazy, and partly because MacVimâ€™s biggest feature (besides internal vim improvements) is that it comes with a GUI. But vim is all about ditching the mouse, so that feels a bit against the philosophy. And itâ€™s 2021 and MacVimâ€™s shell support is still pretty lacking. If, like me, you only need a simple CLI setup, **Iâ€™d say donâ€™t switch**.

Also, starting from Mojave (10.14.x), the built-in vim on macOS is already 8.x. Whatever you need is basically covered by the stock vim.

### How to modify the config

The default config file for the built-in vim on macOS is at `/usr/share/vim/vimrc`. This is a system-level (global) vimrc file. To keep vim running normally, you generally donâ€™t edit this file. Instead, you create a new user-level vimrc file under your home directory. In Terminal, type `touch ~/.vimrc` to create a config file manually (donâ€™t worryâ€”vim will automatically load it). Note that Iâ€™m creating a hidden file here, while the global config file is a normal non-hidden file. Hidden vs non-hidden is up to personal preference (`.xxx` is hidden, `xxx` is not).

![image-20211205115527667](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205115527.png)

<center>Make sure there is a .vimrc file under your home directory</center><br>

After that, if you want to tweak built-in vim settings or add custom key mappings, just put them in here. No restart neededâ€”changes take effect immediately.



### How to install plugins

For installing vim plugins, you *can* follow the official [vim guide](https://github.com/vim/vim/blob/03c3bd9fd094c1aede2e8fe3ad8fd25b9f033053/runtime/doc/repeat.txt#L515) and install manually. But I strongly recommend using a package managerâ€”it makes updates much easier later. Here I recommend [vim-plug](https://github.com/junegunn/vim-plug). You might see people recommend `vundle`, but itâ€™s no longer maintained. `vim-plug` not only promises ongoing maintenance, it also has very solid documentation.

Installation is super simple. Their [github](https://github.com/junegunn/vim-plug) has guides for different platforms. For Unix (macOS and Linux), just run this in your shell:

```shell
curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
```

Thatâ€™s it. If the progress bar hangs forever, you can check my post on [Terminal proxy](https://www.someget.cn/other/2020/12/05/mac_proxy.html), or download the `.vim` script from their site and manually place it under `~/.vim/autoload/` (create the directory if it doesnâ€™t exist).

![image-20211205120206489](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205120206.png)

<center>Successful installation screen (this curl is basically just downloading the script to a specific local path)</center><br>

After installing, youâ€™ll need a **plugin marketplace** to find the package nameâ€”kind of like Maven coordinates. vim-plug is like Maven managing your dependencies, and Maven Central is like the plugin marketplace. Unless you can memorize all coordinates, you go to the central repo, copy the coordinates, and put them into `pom.xml`. For vim plugins, you go to the marketplace, find the corresponding command, put it into `.vimrc`, and then run the install command (kind of like...).

The marketplace I use is [vimawesome](https://vimawesome.com/). It has a huge collection, and it supports not only vim-plug but also other package managers.

![image-20211205121905833](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205121905.png)

<center>The command provided for a plugin on vimawesome</center><br>

Once you have `vim-plug` and have bookmarked `vimawesome`, just follow the `vim-plug` docs to install plugins. Iâ€™ll also share a plugin below and show you how to install it.



## Recommended config tweaks

### Enable syntax highlighting

By default, vim on macOS doesnâ€™t have syntax highlighting. I might not understand the code, but the code *must* be highlighted. I randomly edited a startup file with some default and custom configs to show the difference between highlighted vs not.

![2021-12-05 15.47.41](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205154829.gif)

<center>No highlighting</center>

![2021-12-05 15.50.31](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205155059.gif)

<center>With highlighting</center><br>

I donâ€™t think I need to say much about this comparison. Every time I see the Android folks in my team with a screen full of colorful code, Iâ€™m like â€œwow so proâ€â€”more colors must mean better skills, right? ğŸ¤¡

Enabling highlighting is super easy: in your shell, run `vim ~/.vimrc`, then add `syntax on`, then `:wq` to save. After that, open vim again and check your codeâ€”highlighting should be there.

![image-20211205160300407](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205160300.png)



<center>Just add one line</center>

### Highlight the current line

In your shell, run `vim ~/.vimrc`, then add `set cursorline`.

![image-20211205161016943](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205161017.png)

<center>Split config by lines</center><br>

Then youâ€™ll get the effect below: the line where your cursor is will be underlined/highlighted. This is super useful when editing configsâ€”especially when you use `/` to search and your eyes have to scan around to figure out where you landed.

![image-20211205160949758](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205160949.png)

<center>Cursor positioning effect</center>



### Keep indentation consistent

Most of the time I use vim to edit server configs. Sometimes I add comments before modifying things. If I indent the first line, when I go to the next line it wonâ€™t keep the indentation automaticallyâ€”I have to type it again. Add `set autoindent` to `.vimrc` and the next line will automatically keep the same indentation as the previous line.

![image-20211205162222121](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205162222.png)



<center>Remember: one config per line</center>

![2021-12-05 16.37.48](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205164049.gif)

<center>The effect: new lines keep the previous lineâ€™s indentation</center>

### Replace the escape key

The most common use of `escape` is switching from insert mode back to normal mode. `escape` is far away, and the most comfortable â€œcoreâ€ keys are already taken. My solution is to use a combo key: quickly type `j+k` to act as `escape`.

The change is simple: add `imap jk <Esc>` to `~/.vimrc`. You can replace `jk` with any other keys you likeâ€”Iâ€™m just used to `jk`.

Final effect: when typing, use the `jk` combo to quickly switch back to normal mode.

![2021-12-05 16.48.34](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205164923.gif)

### Replace the `:` key

To type `:`, you have to press `shift+;`. As a lazy person, I really donâ€™t want to press two keys. But entering command-line mode from normal mode is something you do constantly when interacting with vim. After thinking about it, I realized the space key is basically wasted in normal mode, because editing in normal mode relies on letter keys and doesnâ€™t use space. So I mapped space to `:` to enter command mode. Itâ€™s also super simple: add `nmap <space> :` to `~/.vimrc`.

Effect:

![2021-12-05 16.48.34](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205165846.gif)



### Others

You can totally set things based on your own habits. For key mappings, you can use `xmap`. Here `x` is a dynamic valueâ€”different `x` means different modes/behaviors. I made a table for you; feel free to get creative and customize your mappings.

| x     | Meaning                        |
| ----- | ------------------------------ |
| nore  | Non-recursive                  |
| n     | Effective in normal mode       |
| v     | Effective in visual mode       |
| i     | Effective in insert mode       |
| c     | Effective in command-line mode |
| un    | Followed by a key combo; removes the mapping |
| clear | Clears all mappings in the corresponding mode |

For other configs, hereâ€™s a summary as well:

```shell
# è‡ªåŠ¨è¯­æ³•é«˜äº®
syntax on 
# å¼€å¯æ’ä»¶
filetype plugin indent on 
# å…³é—­ vi å…¼å®¹æ¨¡å¼
set nocompatible
# æ˜¾ç¤ºè¡Œå·
set number 
# çªå‡ºæ˜¾ç¤ºå½“å‰è¡Œ
set cursorline  
# æ‰“å¼€çŠ¶æ€æ æ ‡å°º
set ruler  
# è®¾å®š << å’Œ >> å‘½ä»¤ç§»åŠ¨æ—¶çš„å®½åº¦ä¸º 4
set shiftwidth=4 
# ä½¿å¾—æŒ‰é€€æ ¼é”®æ—¶å¯ä»¥ä¸€æ¬¡åˆ æ‰ 4 ä¸ªç©ºæ ¼
set softtabstop=4 
# è®¾å®š tab é•¿åº¦ä¸º 4
set tabstop=4 
# è¦†ç›–æ–‡ä»¶æ—¶ä¸å¤‡ä»½
set nobackup 
# è‡ªåŠ¨åˆ‡æ¢å½“å‰ç›®å½•ä¸ºå½“å‰æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•
set autochdir 
# è®¾ç½®å¤‡ä»½æ—¶çš„è¡Œä¸ºä¸ºè¦†ç›–
set backupcopy=yes 
# æœç´¢æ—¶å¿½ç•¥å¤§å°å†™ï¼Œä½†åœ¨æœ‰ä¸€ä¸ªæˆ–ä»¥ä¸Šå¤§å†™å­—æ¯æ—¶ä»ä¿æŒå¯¹å¤§å°å†™æ•æ„Ÿ
set ignorecase smartcase 
# ç¦æ­¢åœ¨æœç´¢åˆ°æ–‡ä»¶ä¸¤ç«¯æ—¶é‡æ–°æœç´¢
set nowrapscan 
# è¾“å…¥æœç´¢å†…å®¹æ—¶å°±æ˜¾ç¤ºæœç´¢ç»“æœ
set incsearch 
# æœç´¢æ—¶é«˜äº®æ˜¾ç¤ºè¢«æ‰¾åˆ°çš„æ–‡æœ¬
set hlsearch 
# å…³é—­é”™è¯¯ä¿¡æ¯å“é“ƒ
set noerrorbells 
# å…³é—­ä½¿ç”¨å¯è§†å“é“ƒä»£æ›¿å‘¼å«
set novisualbell 
# ç½®ç©ºé”™è¯¯é“ƒå£°çš„ç»ˆç«¯ä»£ç 
set t_vb= 
# æ’å…¥æ‹¬å·æ—¶ï¼ŒçŸ­æš‚åœ°è·³è½¬åˆ°åŒ¹é…çš„å¯¹åº”æ‹¬å·
set showmatch 
# çŸ­æš‚è·³è½¬åˆ°åŒ¹é…æ‹¬å·çš„æ—¶é—´
set matchtime=2 
# è®¾ç½®é­”æœ¯
set magic 
# å…è®¸åœ¨æœ‰æœªä¿å­˜çš„ä¿®æ”¹æ—¶åˆ‡æ¢ç¼“å†²åŒºï¼Œæ­¤æ—¶çš„ä¿®æ”¹ç”± vim è´Ÿè´£ä¿å­˜
set hidden 
# éšè—å·¥å…·æ 
set guioptions-=T 
# éšè—èœå•æ 
set guioptions-=m 
# å¼€å¯æ–°è¡Œæ—¶ä½¿ç”¨æ™ºèƒ½è‡ªåŠ¨ç¼©è¿›
set smartindent 
# ä¸è®¾å®šåœ¨æ’å…¥çŠ¶æ€æ— æ³•ç”¨é€€æ ¼é”®å’Œ Delete é”®åˆ é™¤å›è½¦ç¬¦
set backspace=indent,eol,start
# è®¾å®šå‘½ä»¤è¡Œçš„è¡Œæ•°ä¸º 1
set cmdheight=1 
# æ˜¾ç¤ºçŠ¶æ€æ  (é»˜è®¤å€¼ä¸º 1, æ— æ³•æ˜¾ç¤ºçŠ¶æ€æ )
set laststatus=2 
# è®¾ç½®åœ¨çŠ¶æ€è¡Œæ˜¾ç¤ºçš„ä¿¡æ¯
set statusline=\ %<%F[%1*%M%*%n%R%H]%=\ %y\ %0(%{&fileformat}\ %{&encoding}\ %c:%l/%L%)\ 
# å¼€å§‹æŠ˜å 
set foldenable 
# è®¾ç½®è¯­æ³•æŠ˜å 
set foldmethod=syntax 
# è®¾ç½®æŠ˜å åŒºåŸŸçš„å®½åº¦
set foldcolumn=0 
# è®¾ç½®æŠ˜å å±‚æ•°ä¸º1
set local foldlevel=1 
```



## Recommended plugins

Iâ€™m only recommending one plugin hereâ€”mainly to demonstrate how to install plugins with vim-plug. You can go treasure-hunting on [vimawesome](https://vimawesome.com/) yourself. After you find something, remember to share it in the comments.

The plugin I recommend is `The NERD tree`. It shows a basic file explorer tree like an IDE does, for example in VS Code:

![image-20211205174946690](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205174946.png)

<center>VS Code directory tree</center><br>

After using `The NERD tree`, in vim it looks like this:

![image-20211205175029546](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205175029.png)

<center>The NERD tree UI</center><br>

#### Hereâ€™s how to install it

- Go to the plugin marketplace vimawesome and find [The NERD tree](https://vimawesome.com/plugin/nerdtree-red)

- Copy this one-line command

![image-20211205175144192](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205175144.png)

- Then open your shell and run `vim ~/.vimrc`. Yes!!! This config file again. Then add:

```shell
call plug#begin('~/.vim/autoload')
call plug#end()
```

- Then paste the command you found on vimawesome between those two lines, like this:

```shell
call plug#begin('~/.vim/autoload')
Plug 'scrooloose/nerdtree'
call plug#end()
```

![image-20211205175551695](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205175551.png)



- Then switch to command mode and enter `PlugInstall` (note: you must have vim-plug installed, otherwise itâ€™ll say the command canâ€™t be found)

![image-20211205175831177](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205175831.png)

![image-20211205175847764](https://mypicgogo.oss-cn-hangzhou.aliyuncs.com/tuchuang20211205175847.png)

- Then in vim you can press `ctrl+t` to view the directory tree for the current file. The pluginâ€™s documentation on vimawesome is way more detailed than what Iâ€™m writing here.

<br>

At this point, the plugin is installed. If you need other plugins, the process is the same: copy the command you find on vimawesome into the two `call` lines, then run `PlugInstall`.

**END**

## Recommended resources

1. [Lanqiao Cloud Course: basic vim](https://www.lanqiao.cn/courses/2840)
2. [Vim adventure mini-game](https://vim-adventures.com/)
2. [vim-plug](https://github.com/junegunn/vim-plug)
2. [Vim official manual plugin guide](https://github.com/vim/vim/blob/03c3bd9fd094c1aede2e8fe3ad8fd25b9f033053/runtime/doc/repeat.txt#L515)
2. [Recommended plugin repository - vimawesome](https://vimawesome.com/)
2. [Ruanyifengâ€™s intro to vim configuration](https://www.ruanyifeng.com/blog/2018/09/vimrc.html)